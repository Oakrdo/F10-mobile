--[[
    EXPLORER MOBILE - VERS√ÉO LIMPA E VIS√çVEL
    Sem transpar√™ncias, contraste m√°ximo
]]

local Players = game:GetService("Players")
local PLAYER = Players.LocalPlayer

-- Vari√°veis
local expandedFolders = {}
local screenGui = nil

-- Criar a interface
screenGui = Instance.new("ScreenGui")
screenGui.Name = "MobileExplorer"
screenGui.Parent = PLAYER:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

-- Bot√£o para abrir/fechar - VERDE FORTE
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 120, 0, 50)
toggleButton.Position = UDim2.new(1, -130, 0, 10)
toggleButton.AnchorPoint = Vector2.new(1, 0)
toggleButton.Text = "üìÅ EXPLORER"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)  -- BRANCO PURO
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)  -- VERDE FORTE
toggleButton.BorderSizePixel = 0
toggleButton.TextSize = 18
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.ZIndex = 10
toggleButton.Parent = screenGui

-- Frame principal - PRETO S√ìLIDO
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0.95, 0, 0.85, 0)
mainFrame.Position = UDim2.new(0.025, 0, 0.075, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)  -- PRETO PURO
mainFrame.BorderSizePixel = 2
mainFrame.BorderColor3 = Color3.fromRGB(255, 255, 0)
mainFrame.Visible = false
mainFrame.ZIndex = 5
mainFrame.Parent = screenGui

-- T√≠tulo - AMARELO SOBRE PRETO
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 50)
title.Text = "üîç EXPLORER"
title.TextColor3 = Color3.fromRGB(255, 255, 0)  -- AMARELO BRILHANTE
title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)  -- CINZA ESCURO
title.BorderSizePixel = 0
title.TextSize = 22
title.Font = Enum.Font.SourceSansBold
title.Parent = mainFrame

-- √Årea de scroll
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, -10, 1, -110)
scrollFrame.Position = UDim2.new(0, 5, 0, 55)
scrollFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)  -- FUNDO ESCURO
scrollFrame.BorderSizePixel = 0
scrollFrame.ScrollBarThickness = 15
scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(255, 255, 0)
scrollFrame.Parent = mainFrame

-- Container dos itens
local itemsContainer = Instance.new("Frame")
itemsContainer.Size = UDim2.new(1, 0, 0, 0)
itemsContainer.BackgroundTransparency = 1
itemsContainer.Parent = scrollFrame

-- Fun√ß√£o para obter √≠cone
local function GetIcon(className)
    local icons = {
        Folder = "üìÅ",
        Part = "üß±",
        MeshPart = "üî∑", 
        Script = "üìú",
        Model = "üì¶",
        Sound = "üîä",
        Camera = "üì∑",
        Light = "üí°",
        Humanoid = "üë§"
    }
    return icons[className] or "üìÑ"
end

-- Fun√ß√£o para adicionar item
local function AddItem(object, depth, parent)
    local itemFrame = Instance.new("Frame")
    itemFrame.Size = UDim2.new(1, 0, 0, 35)
    itemFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)  -- FUNDO CINZA
    itemFrame.BorderSizePixel = 1
    itemFrame.BorderColor3 = Color3.fromRGB(60, 60, 60)
    itemFrame.Name = "Item_" .. object.Name
    
    -- Bot√£o de expandir
    local expandButton = Instance.new("TextButton")
    expandButton.Size = UDim2.new(0, 30, 0, 30)
    expandButton.Position = UDim2.new(0, depth * 30, 0, 2)
    expandButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    expandButton.BorderSizePixel = 0
    expandButton.TextColor3 = Color3.fromRGB(255, 255, 0)
    expandButton.TextSize = 16
    expandButton.Parent = itemFrame
    
    -- √çcone
    local icon = Instance.new("TextLabel")
    icon.Size = UDim2.new(0, 30, 0, 30)
    icon.Position = UDim2.new(0, depth * 30 + 30, 0, 2)
    icon.Text = GetIcon(object.ClassName)
    icon.TextColor3 = Color3.fromRGB(255, 255, 0)
    icon.BackgroundTransparency = 1
    icon.TextSize = 16
    icon.Parent = itemFrame
    
    -- Nome do objeto
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, -(depth * 30 + 70), 0, 30)
    nameLabel.Position = UDim2.new(0, depth * 30 + 65, 0, 2)
    nameLabel.Text = object.Name
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)  -- BRANCO
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.BackgroundTransparency = 1
    nameLabel.TextSize = 14
    nameLabel.Font = Enum.Font.SourceSansBold
    nameLabel.Parent = itemFrame
    
    -- Classe do objeto
    local classLabel = Instance.new("TextLabel")
    classLabel.Size = UDim2.new(0.4, 0, 0, 15)
    classLabel.Position = UDim2.new(0, depth * 30 + 65, 0, 22)
    classLabel.Text = "(" .. object.ClassName .. ")"
    classLabel.TextColor3 = Color3.fromRGB(200, 200, 0)  -- Amarelo mais escuro
    classLabel.TextXAlignment = Enum.TextXAlignment.Left
    classLabel.BackgroundTransparency = 1
    classLabel.TextSize = 10
    classLabel.Parent = itemFrame
    
    -- Verificar se √© folder/expand√≠vel
    local hasChildren = #object:GetChildren() > 0
    local isExpanded = expandedFolders[object]
    
    if hasChildren then
        if isExpanded then
            expandButton.Text = "‚ñº"
        else
            expandButton.Text = "‚ñ∂"
        end
        
        -- Evento para expandir/colapsar
        expandButton.MouseButton1Click:Connect(function()
            expandedFolders[object] = not expandedFolders[object]
            PopulateExplorer()
        end)
    else
        expandButton.Text = "‚Ä¢"
        expandButton.TextColor3 = Color3.fromRGB(150, 150, 0)
    end
    
    itemFrame.Parent = parent
    return itemFrame
end

-- Fun√ß√£o para adicionar objetos recursivamente
local function AddObjects(parentObject, depth, parentContainer)
    local yPosition = 0
    
    for _, child in ipairs(parentObject:GetChildren()) do
        -- Pular scripts para n√£o poluir
        if not child:IsA("Script") and not child:IsA("LocalScript") then
            local item = AddItem(child, depth, parentContainer)
            item.Position = UDim2.new(0, 0, 0, yPosition)
            yPosition = yPosition + 35
            
            -- Adicionar filhos se for folder expandido
            if expandedFolders[child] and #child:GetChildren() > 0 then
                yPosition = yPosition + AddObjects(child, depth + 1, parentContainer)
            end
        end
    end
    
    return yPosition
end

-- Fun√ß√£o para popular o explorer
local function PopulateExplorer()
    -- Limpar container
    itemsContainer:ClearAllChildren()
    
    local totalHeight = 0
    
    -- Adicionar Workspace
    local workspaceHeader = Instance.new("TextButton")
    workspaceHeader.Size = UDim2.new(1, 0, 0, 40)
    workspaceHeader.Position = UDim2.new(0, 0, 0, totalHeight)
    workspaceHeader.Text = "üéØ WORKSPACE - " .. #workspace:GetChildren() .. " objetos"
    workspaceHeader.TextColor3 = Color3.fromRGB(255, 255, 255)  -- BRANCO
    workspaceHeader.BackgroundColor3 = Color3.fromRGB(0, 100, 0)  -- VERDE
    workspaceHeader.BorderSizePixel = 0
    workspaceHeader.TextSize = 16
    workspaceHeader.Font = Enum.Font.SourceSansBold
    workspaceHeader.Parent = itemsContainer
    
    -- Expandir/colapsar Workspace
    workspaceHeader.MouseButton1Click:Connect(function()
        expandedFolders[workspace] = not expandedFolders[workspace]
        PopulateExplorer()
    end)
    
    totalHeight = totalHeight + 40
    
    -- Adicionar objetos do Workspace se expandido
    if expandedFolders[workspace] then
        totalHeight = totalHeight + AddObjects(workspace, 0, itemsContainer)
    end
    
    -- Espa√ßo entre se√ß√µes
    totalHeight = totalHeight + 5
    
    -- Adicionar Lighting
    local lightingHeader = Instance.new("TextButton")
    lightingHeader.Size = UDim2.new(1, 0, 0, 40)
    lightingHeader.Position = UDim2.new(0, 0, 0, totalHeight)
    lightingHeader.Text = "üí° LIGHTING - " .. #game.Lighting:GetChildren() .. " objetos"
    lightingHeader.TextColor3 = Color3.fromRGB(255, 255, 255)  -- BRANCO
    lightingHeader.BackgroundColor3 = Color3.fromRGB(0, 100, 0)  -- VERDE
    lightingHeader.BorderSizePixel = 0
    lightingHeader.TextSize = 16
    lightingHeader.Font = Enum.Font.SourceSansBold
    lightingHeader.Parent = itemsContainer
    
    lightingHeader.MouseButton1Click:Connect(function()
        expandedFolders[game.Lighting] = not expandedFolders[game.Lighting]
        PopulateExplorer()
    end)
    
    totalHeight = totalHeight + 40
    
    -- Adicionar objetos do Lighting se expandido
    if expandedFolders[game.Lighting] then
        totalHeight = totalHeight + AddObjects(game.Lighting, 0, itemsContainer)
    end
    
    -- Ajustar tamanhos
    itemsContainer.Size = UDim2.new(1, 0, 0, totalHeight)
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, totalHeight)
end

-- Bot√£o de atualizar - AZUL
local refreshButton = Instance.new("TextButton")
refreshButton.Size = UDim2.new(0, 140, 0, 40)
refreshButton.Position = UDim2.new(0.5, -70, 1, -50)
refreshButton.Text = "üîÑ ATUALIZAR"
refreshButton.TextColor3 = Color3.fromRGB(255, 255, 255)
refreshButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)  -- AZUL
refreshButton.BorderSizePixel = 0
refreshButton.TextSize = 16
refreshButton.Font = Enum.Font.SourceSansBold
refreshButton.Parent = mainFrame

-- Bot√£o de fechar - VERMELHO
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 140, 0, 40)
closeButton.Position = UDim2.new(0.5, -70, 1, -95)
closeButton.Text = "‚ùå FECHAR"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)  -- VERMELHO
closeButton.BorderSizePixel = 0
closeButton.TextSize = 16
closeButton.Font = Enum.Font.SourceSansBold
closeButton.Parent = mainFrame

-- Conex√µes dos bot√µes
toggleButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = not mainFrame.Visible
    if mainFrame.Visible then
        PopulateExplorer()
        toggleButton.Text = "üìÅ ABERTO"
        toggleButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)  -- VERDE CLARO
    else
        toggleButton.Text = "üìÅ EXPLORER"
        toggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)  -- VERDE NORMAL
    end
end)

refreshButton.MouseButton1Click:Connect(function()
    PopulateExplorer()
end)

closeButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    toggleButton.Text = "üìÅ EXPLORER"
    toggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
end)

-- Expandir Workspace por padr√£o
expandedFolders[workspace] = true

print("üîç EXPLORER MOBILE - VERS√ÉO LIMPA")
print("üé® Cores s√≥lidas sem transpar√™ncia")
print("üì± Contraste m√°ximo para visibilidade")